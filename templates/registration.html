{% extends "base.html" %}

{% block title %}Registration - GIIR Conference 2024{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Conference Registration</h1>
    <p>Choose your registration package and join us at GIIR Conference 2024</p>
</div>

<div class="content-section">
    <div class="registration-intro">
        <div class="info-card">
            <div class="info-header">
                <i class="fas fa-info-circle"></i>
                <h2>Important Information</h2>
            </div>
            <p>All conference participants must pay the registration fee. For each paper/poster, at least one author must attend and pay the registration fee. Delegates can choose any of the options given below to participate at the Conference.</p>
        </div>
    </div>

    <!-- Registration Fee Tables -->
    <section class="registration-options">
        <h2>Registration Packages</h2>
        <div class="pricing-grid">
            <!-- Early Bird Registration -->
            <div class="pricing-card highlight">
                <div class="pricing-header">
                    <i class="fas fa-star"></i>
                    <h3>Early Bird Registration</h3>
                </div>
                <p class="deadline">Deadline: {{ fees.early_bird.deadline if fees and fees.early_bird else 'TBA' }}</p>
                <ul class="pricing-features">
                    <li>
                        <i class="fas fa-user-graduate"></i>
                        <span class="feature-label">Authors (Students)</span>
                        <span class="price">{% if fees and fees.early_bird and fees.early_bird.student_author %}${{ fees.early_bird.student_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-user"></i>
                        <span class="feature-label">Authors (Regular)</span>
                        <span class="price">{% if fees and fees.early_bird and fees.early_bird.regular_author %}${{ fees.early_bird.regular_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-headphones"></i>
                        <span class="feature-label">Listener</span>
                        <span class="price">{% if fees and fees.early_bird and fees.early_bird.listener %}${{ fees.early_bird.listener }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-laptop"></i>
                        <span class="feature-label">Virtual Delegate</span>
                        <span class="price">{% if fees and fees.early_bird and fees.early_bird.virtual %}${{ fees.early_bird.virtual }}{% else %}TBA{% endif %}</span>
                    </li>
                </ul>
                <a href="{{ url_for('registration') }}" class="btn btn-primary">
                    <i class="fas fa-ticket-alt"></i> Register Now
                </a>
            </div>

            <!-- Early Registration -->
            <div class="pricing-card">
                <div class="pricing-header">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>Early Registration</h3>
                </div>
                <p class="deadline">Deadline: {{ fees.early.deadline if fees and fees.early else 'TBA' }}</p>
                <ul class="pricing-features">
                    <li>
                        <i class="fas fa-user-graduate"></i>
                        <span class="feature-label">Authors (Students)</span>
                        <span class="price">{% if fees and fees.early and fees.early.student_author %}${{ fees.early.student_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-user"></i>
                        <span class="feature-label">Authors (Regular)</span>
                        <span class="price">{% if fees and fees.early and fees.early.regular_author %}${{ fees.early.regular_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-headphones"></i>
                        <span class="feature-label">Listener</span>
                        <span class="price">{% if fees and fees.early and fees.early.listener %}${{ fees.early.listener }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-laptop"></i>
                        <span class="feature-label">Virtual Delegate</span>
                        <span class="price">{% if fees and fees.early and fees.early.virtual %}${{ fees.early.virtual }}{% else %}TBA{% endif %}</span>
                    </li>
                </ul>
                <a href="{{ url_for('registration') }}" class="btn btn-primary">
                    <i class="fas fa-ticket-alt"></i> Register Now
                </a>
            </div>

            <!-- Late Registration -->
            <div class="pricing-card">
                <div class="pricing-header">
                    <i class="fas fa-hourglass-half"></i>
                    <h3>Late Registration</h3>
                </div>
                <p class="deadline">Deadline: {{ fees.late.deadline if fees and fees.late else 'TBA' }}</p>
                <ul class="pricing-features">
                    <li>
                        <i class="fas fa-user-graduate"></i>
                        <span class="feature-label">Authors (Students)</span>
                        <span class="price">{% if fees and fees.late and fees.late.student_author %}${{ fees.late.student_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-user"></i>
                        <span class="feature-label">Authors (Regular)</span>
                        <span class="price">{% if fees and fees.late and fees.late.regular_author %}${{ fees.late.regular_author }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-headphones"></i>
                        <span class="feature-label">Listener</span>
                        <span class="price">{% if fees and fees.late and fees.late.listener %}${{ fees.late.listener }}{% else %}TBA{% endif %}</span>
                    </li>
                    <li>
                        <i class="fas fa-laptop"></i>
                        <span class="feature-label">Virtual Delegate</span>
                        <span class="price">{% if fees and fees.late and fees.late.virtual %}${{ fees.late.virtual }}{% else %}TBA{% endif %}</span>
                    </li>
                </ul>
                <a href="{{ url_for('registration') }}" class="btn btn-primary">
                    <i class="fas fa-ticket-alt"></i> Register Now
                </a>
            </div>
        </div>
    </section>

    <!-- Registration Includes -->
    <section class="benefits-section">
        <h2>What's Included</h2>
        <div class="benefits-grid">
            {% if fees and fees.includes %}
                {% for item in fees.includes %}
                    <div class="benefit-card">
                        <i class="fas fa-check-circle"></i>
                        <p>{{ item }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <div class="benefit-card">
                    <i class="fas fa-info-circle"></i>
                    <p>Details will be announced soon</p>
                </div>
            {% endif %}
        </div>
    </section>

    <!-- Additional Information -->
    <section class="additional-info">
        <div class="info-grid">
            <div class="info-card">
                <div class="info-header">
                    <i class="fas fa-exclamation-circle"></i>
                    <h3>Important Notice</h3>
                </div>
                <ul class="info-list">
                    <li><i class="fas fa-plus-circle"></i> Extra paper fee: {% if fees and fees.extra_paper_fee %}${{ fees.extra_paper_fee }}{% else %}TBA{% endif %}</li>
                    <li><i class="fas fa-clock"></i> Fees apply ONLY to payments received by the indicated deadlines.</li>
                    <li><i class="fas fa-info-circle"></i> Conference fee does not include accommodation and airport transfer.</li>
                </ul>
            </div>

            <div class="info-card">
                <div class="info-header">
                    <i class="fas fa-ban"></i>
                    <h3>Cancellation Policy</h3>
                </div>
                <p>In the case of non-attendance, the registration fee will not be refunded.</p>
            </div>
        </div>
    </section>

    <!-- Payment Methods -->
    <section class="payment-section">
        <h2>Payment Methods</h2>
        <p class="section-intro">Use the form below to register and pay ONLINE with credit card or PayPal or you can pay your registration fee through a bank transfer as per given information below:</p>

        {% if fees and fees.payment_details %}
        <div class="payment-details">
            <div class="bank-details-card">
                <div class="card-header">
                    <i class="fas fa-university"></i>
                    <h3>Bank Transfer Details</h3>
                </div>
                <div class="bank-info">
                    <div class="info-row">
                        <span class="label">Beneficiary</span>
                        <span class="value">{{ fees.payment_details.beneficiary }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">IBAN</span>
                        <span class="value">{{ fees.payment_details.iban }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">BIC</span>
                        <span class="value">{{ fees.payment_details.bic }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Beneficiary Address</span>
                        <span class="value">{{ fees.payment_details.beneficiary_address }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Bank Name</span>
                        <span class="value">{{ fees.payment_details.bank_name }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Bank Address</span>
                        <span class="value">{{ fees.payment_details.bank_address }}</span>
                    </div>
                    {% if fees.payment_details.intermediary_bic %}
                    <div class="info-row">
                        <span class="label">Intermediary BIC</span>
                        <span class="value">{{ fees.payment_details.intermediary_bic }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="payment-notice">
                <i class="fas fa-info-circle"></i>
                <p>After sending your registration payment by bank wire transfer, scan the bank receipt and attach the PDF file in an email to: <a href="mailto:{{ fees.payment_details.contact_email }}">{{ fees.payment_details.contact_email }}</a></p>
            </div>
        </div>
        {% endif %}

        <div class="registration-types">
            <h3>Choose Your Registration Type</h3>
            <div class="registration-buttons">
                <a href="{{ url_for('registration', registration_type='oral') }}" class="btn btn-primary">
                    <i class="fas fa-microphone"></i> Oral / Poster Registration
                </a>
                <a href="{{ url_for('registration', registration_type='listener') }}" class="btn btn-primary">
                    <i class="fas fa-headphones"></i> Listener Registration
                </a>
                <a href="{{ url_for('registration', registration_type='virtual') }}" class="btn btn-primary">
                    <i class="fas fa-laptop"></i> Virtual Registration
                </a>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    function calculateTotal() {
        let total = 0;
        const type = document.getElementById('registration_type').value;
        const isEarlyBird = new Date() < new Date('2024-03-31');
        
        // Base registration fee
        if (type === 'regular') {
            total += isEarlyBird ? 500 : 600;
        } else if (type === 'student') {
            total += isEarlyBird ? 300 : 400;
        } else if (type === 'ieee') {
            total += isEarlyBird ? 450 : 550;
        }

        // Additional options
        if (document.getElementById('workshop').checked) {
            total += 100;
        }
        if (document.getElementById('banquet').checked) {
            total += 50;
        }

        document.getElementById('total-amount').textContent = `$${total}`;
    }

    // Add event listeners for form changes
    const registrationType = document.getElementById('registration_type');
    const workshop = document.getElementById('workshop');
    const banquet = document.getElementById('banquet');
    
    if (registrationType) registrationType.addEventListener('change', calculateTotal);
    if (workshop) workshop.addEventListener('change', calculateTotal);
    if (banquet) banquet.addEventListener('change', calculateTotal);
});
</script>
{% endblock %} 